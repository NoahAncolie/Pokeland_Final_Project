{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nclass Object3DNode extends Node {\n  constructor() {\n    let scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object3DNode.VIEW_MATRIX;\n    let object3d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.Object;\n    this._uniformNode = new UniformNode(null);\n  }\n\n  getNodeType() {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n\n  update(frame) {\n    const object = this.object3d !== null ? this.object3d : frame.object;\n    const uniformNode = this._uniformNode;\n    const camera = frame.camera;\n    const scope = this.scope;\n\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n\n  generate(builder) {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n      this._uniformNode.value = new Vector3();\n    }\n\n    return this._uniformNode.build(builder);\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n\n}\n\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\n\nexport default Object3DNode;","map":{"version":3,"names":["_defineProperty","Vector3","Node","UniformNode","NodeUpdateType","Object3DNode","constructor","scope","VIEW_MATRIX","object3d","updateType","Object","_uniformNode","getNodeType","WORLD_MATRIX","NORMAL_MATRIX","POSITION","VIEW_POSITION","update","frame","object","uniformNode","camera","value","modelViewMatrix","normalMatrix","matrixWorld","setFromMatrixPosition","applyMatrix4","matrixWorldInverse","generate","builder","nodeType","build","serialize","data","deserialize"],"sources":["/Users/paolucciloic/Desktop/pokemon-projet-final/Pokeland_Final_Project/node_modules/three-stdlib/nodes/accessors/Object3DNode.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3 } from 'three';\nimport Node from '../core/Node.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\n\nclass Object3DNode extends Node {\n  constructor(scope = Object3DNode.VIEW_MATRIX, object3d = null) {\n    super();\n    this.scope = scope;\n    this.object3d = object3d;\n    this.updateType = NodeUpdateType.Object;\n    this._uniformNode = new UniformNode(null);\n  }\n\n  getNodeType() {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      return 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      return 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      return 'vec3';\n    }\n  }\n\n  update(frame) {\n    const object = this.object3d !== null ? this.object3d : frame.object;\n    const uniformNode = this._uniformNode;\n    const camera = frame.camera;\n    const scope = this.scope;\n\n    if (scope === Object3DNode.VIEW_MATRIX) {\n      uniformNode.value = object.modelViewMatrix;\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      uniformNode.value = object.normalMatrix;\n    } else if (scope === Object3DNode.WORLD_MATRIX) {\n      uniformNode.value = object.matrixWorld;\n    } else if (scope === Object3DNode.POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n    } else if (scope === Object3DNode.VIEW_POSITION) {\n      uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n    }\n  }\n\n  generate(builder) {\n    const scope = this.scope;\n\n    if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n      this._uniformNode.nodeType = 'mat4';\n    } else if (scope === Object3DNode.NORMAL_MATRIX) {\n      this._uniformNode.nodeType = 'mat3';\n    } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION) {\n      this._uniformNode.nodeType = 'vec3';\n      this._uniformNode.value = new Vector3();\n    }\n\n    return this._uniformNode.build(builder);\n  }\n\n  serialize(data) {\n    super.serialize(data);\n    data.scope = this.scope;\n  }\n\n  deserialize(data) {\n    super.deserialize(data);\n    this.scope = data.scope;\n  }\n\n}\n\n_defineProperty(Object3DNode, \"VIEW_MATRIX\", 'viewMatrix');\n\n_defineProperty(Object3DNode, \"NORMAL_MATRIX\", 'normalMatrix');\n\n_defineProperty(Object3DNode, \"WORLD_MATRIX\", 'worldMatrix');\n\n_defineProperty(Object3DNode, \"POSITION\", 'position');\n\n_defineProperty(Object3DNode, \"VIEW_POSITION\", 'viewPosition');\n\nexport default Object3DNode;\n"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,2CAA5B;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAASC,cAAT,QAA+B,sBAA/B;;AAEA,MAAMC,YAAN,SAA2BH,IAA3B,CAAgC;EAC9BI,WAAW,GAAoD;IAAA,IAAnDC,KAAmD,uEAA3CF,YAAY,CAACG,WAA8B;IAAA,IAAjBC,QAAiB,uEAAN,IAAM;IAC7D;IACA,KAAKF,KAAL,GAAaA,KAAb;IACA,KAAKE,QAAL,GAAgBA,QAAhB;IACA,KAAKC,UAAL,GAAkBN,cAAc,CAACO,MAAjC;IACA,KAAKC,YAAL,GAAoB,IAAIT,WAAJ,CAAgB,IAAhB,CAApB;EACD;;EAEDU,WAAW,GAAG;IACZ,MAAMN,KAAK,GAAG,KAAKA,KAAnB;;IAEA,IAAIA,KAAK,KAAKF,YAAY,CAACS,YAAvB,IAAuCP,KAAK,KAAKF,YAAY,CAACG,WAAlE,EAA+E;MAC7E,OAAO,MAAP;IACD,CAFD,MAEO,IAAID,KAAK,KAAKF,YAAY,CAACU,aAA3B,EAA0C;MAC/C,OAAO,MAAP;IACD,CAFM,MAEA,IAAIR,KAAK,KAAKF,YAAY,CAACW,QAAvB,IAAmCT,KAAK,KAAKF,YAAY,CAACY,aAA9D,EAA6E;MAClF,OAAO,MAAP;IACD;EACF;;EAEDC,MAAM,CAACC,KAAD,EAAQ;IACZ,MAAMC,MAAM,GAAG,KAAKX,QAAL,KAAkB,IAAlB,GAAyB,KAAKA,QAA9B,GAAyCU,KAAK,CAACC,MAA9D;IACA,MAAMC,WAAW,GAAG,KAAKT,YAAzB;IACA,MAAMU,MAAM,GAAGH,KAAK,CAACG,MAArB;IACA,MAAMf,KAAK,GAAG,KAAKA,KAAnB;;IAEA,IAAIA,KAAK,KAAKF,YAAY,CAACG,WAA3B,EAAwC;MACtCa,WAAW,CAACE,KAAZ,GAAoBH,MAAM,CAACI,eAA3B;IACD,CAFD,MAEO,IAAIjB,KAAK,KAAKF,YAAY,CAACU,aAA3B,EAA0C;MAC/CM,WAAW,CAACE,KAAZ,GAAoBH,MAAM,CAACK,YAA3B;IACD,CAFM,MAEA,IAAIlB,KAAK,KAAKF,YAAY,CAACS,YAA3B,EAAyC;MAC9CO,WAAW,CAACE,KAAZ,GAAoBH,MAAM,CAACM,WAA3B;IACD,CAFM,MAEA,IAAInB,KAAK,KAAKF,YAAY,CAACW,QAA3B,EAAqC;MAC1CK,WAAW,CAACE,KAAZ,CAAkBI,qBAAlB,CAAwCP,MAAM,CAACM,WAA/C;IACD,CAFM,MAEA,IAAInB,KAAK,KAAKF,YAAY,CAACY,aAA3B,EAA0C;MAC/CI,WAAW,CAACE,KAAZ,CAAkBI,qBAAlB,CAAwCP,MAAM,CAACM,WAA/C;MACAL,WAAW,CAACE,KAAZ,CAAkBK,YAAlB,CAA+BN,MAAM,CAACO,kBAAtC;IACD;EACF;;EAEDC,QAAQ,CAACC,OAAD,EAAU;IAChB,MAAMxB,KAAK,GAAG,KAAKA,KAAnB;;IAEA,IAAIA,KAAK,KAAKF,YAAY,CAACS,YAAvB,IAAuCP,KAAK,KAAKF,YAAY,CAACG,WAAlE,EAA+E;MAC7E,KAAKI,YAAL,CAAkBoB,QAAlB,GAA6B,MAA7B;IACD,CAFD,MAEO,IAAIzB,KAAK,KAAKF,YAAY,CAACU,aAA3B,EAA0C;MAC/C,KAAKH,YAAL,CAAkBoB,QAAlB,GAA6B,MAA7B;IACD,CAFM,MAEA,IAAIzB,KAAK,KAAKF,YAAY,CAACW,QAAvB,IAAmCT,KAAK,KAAKF,YAAY,CAACY,aAA9D,EAA6E;MAClF,KAAKL,YAAL,CAAkBoB,QAAlB,GAA6B,MAA7B;MACA,KAAKpB,YAAL,CAAkBW,KAAlB,GAA0B,IAAItB,OAAJ,EAA1B;IACD;;IAED,OAAO,KAAKW,YAAL,CAAkBqB,KAAlB,CAAwBF,OAAxB,CAAP;EACD;;EAEDG,SAAS,CAACC,IAAD,EAAO;IACd,MAAMD,SAAN,CAAgBC,IAAhB;IACAA,IAAI,CAAC5B,KAAL,GAAa,KAAKA,KAAlB;EACD;;EAED6B,WAAW,CAACD,IAAD,EAAO;IAChB,MAAMC,WAAN,CAAkBD,IAAlB;IACA,KAAK5B,KAAL,GAAa4B,IAAI,CAAC5B,KAAlB;EACD;;AAhE6B;;AAoEhCP,eAAe,CAACK,YAAD,EAAe,aAAf,EAA8B,YAA9B,CAAf;;AAEAL,eAAe,CAACK,YAAD,EAAe,eAAf,EAAgC,cAAhC,CAAf;;AAEAL,eAAe,CAACK,YAAD,EAAe,cAAf,EAA+B,aAA/B,CAAf;;AAEAL,eAAe,CAACK,YAAD,EAAe,UAAf,EAA2B,UAA3B,CAAf;;AAEAL,eAAe,CAACK,YAAD,EAAe,eAAf,EAAgC,cAAhC,CAAf;;AAEA,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}