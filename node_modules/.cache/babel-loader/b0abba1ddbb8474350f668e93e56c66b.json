{"ast":null,"code":"import { ShaderMaterial, Material } from 'three';\nimport { getNodesKeys } from '../core/NodeUtils.js';\n\nclass NodeMaterial extends ShaderMaterial {\n  constructor() {\n    super();\n    this.type = this.constructor.name;\n    this.lights = true;\n  }\n\n  setDefaultValues(values) {\n    // This approach is to reuse the native refreshUniforms*\n    // and turn available the use of features like transmission and environment in core\n    let value;\n\n    for (const property in values) {\n      value = values[property];\n\n      if (this[property] === undefined) {\n        if (value && typeof value.clone === 'function') {\n          this[property] = value.clone();\n        } else {\n          this[property] = value;\n        }\n      }\n    }\n\n    Object.assign(this.defines, values.defines);\n  }\n\n  toJSON(meta) {\n    const isRoot = meta === undefined || typeof meta === 'string';\n\n    if (isRoot) {\n      meta = {\n        textures: {},\n        images: {},\n        nodes: {}\n      };\n    }\n\n    const data = Material.prototype.toJSON.call(this, meta);\n    const nodeKeys = getNodesKeys(this);\n    data.inputNodes = {};\n\n    for (const name of nodeKeys) {\n      data.inputNodes[name] = this[name].toJSON(meta).uuid;\n    } // TODO: Copied from Object3D.toJSON\n\n\n    function extractFromCache(cache) {\n      const values = [];\n\n      for (const key in cache) {\n        const data = cache[key];\n        delete data.metadata;\n        values.push(data);\n      }\n\n      return values;\n    }\n\n    if (isRoot) {\n      const textures = extractFromCache(meta.textures);\n      const images = extractFromCache(meta.images);\n      const nodes = extractFromCache(meta.nodes);\n      if (textures.length > 0) data.textures = textures;\n      if (images.length > 0) data.images = images;\n      if (nodes.length > 0) data.nodes = nodes;\n    }\n\n    return data;\n  }\n\n}\n\nNodeMaterial.prototype.isNodeMaterial = true;\nexport default NodeMaterial;","map":{"version":3,"names":["ShaderMaterial","Material","getNodesKeys","NodeMaterial","constructor","type","name","lights","setDefaultValues","values","value","property","undefined","clone","Object","assign","defines","toJSON","meta","isRoot","textures","images","nodes","data","prototype","call","nodeKeys","inputNodes","uuid","extractFromCache","cache","key","metadata","push","length","isNodeMaterial"],"sources":["/Users/paolucciloic/Desktop/pokemon-projet-final/Pokeland_Final_Project/node_modules/three-stdlib/nodes/materials/NodeMaterial.js"],"sourcesContent":["import { ShaderMaterial, Material } from 'three';\nimport { getNodesKeys } from '../core/NodeUtils.js';\n\nclass NodeMaterial extends ShaderMaterial {\n  constructor() {\n    super();\n    this.type = this.constructor.name;\n    this.lights = true;\n  }\n\n  setDefaultValues(values) {\n    // This approach is to reuse the native refreshUniforms*\n    // and turn available the use of features like transmission and environment in core\n    let value;\n\n    for (const property in values) {\n      value = values[property];\n\n      if (this[property] === undefined) {\n        if (value && typeof value.clone === 'function') {\n          this[property] = value.clone();\n        } else {\n          this[property] = value;\n        }\n      }\n    }\n\n    Object.assign(this.defines, values.defines);\n  }\n\n  toJSON(meta) {\n    const isRoot = meta === undefined || typeof meta === 'string';\n\n    if (isRoot) {\n      meta = {\n        textures: {},\n        images: {},\n        nodes: {}\n      };\n    }\n\n    const data = Material.prototype.toJSON.call(this, meta);\n    const nodeKeys = getNodesKeys(this);\n    data.inputNodes = {};\n\n    for (const name of nodeKeys) {\n      data.inputNodes[name] = this[name].toJSON(meta).uuid;\n    } // TODO: Copied from Object3D.toJSON\n\n\n    function extractFromCache(cache) {\n      const values = [];\n\n      for (const key in cache) {\n        const data = cache[key];\n        delete data.metadata;\n        values.push(data);\n      }\n\n      return values;\n    }\n\n    if (isRoot) {\n      const textures = extractFromCache(meta.textures);\n      const images = extractFromCache(meta.images);\n      const nodes = extractFromCache(meta.nodes);\n      if (textures.length > 0) data.textures = textures;\n      if (images.length > 0) data.images = images;\n      if (nodes.length > 0) data.nodes = nodes;\n    }\n\n    return data;\n  }\n\n}\n\nNodeMaterial.prototype.isNodeMaterial = true;\n\nexport default NodeMaterial;\n"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,QAAzB,QAAyC,OAAzC;AACA,SAASC,YAAT,QAA6B,sBAA7B;;AAEA,MAAMC,YAAN,SAA2BH,cAA3B,CAA0C;EACxCI,WAAW,GAAG;IACZ;IACA,KAAKC,IAAL,GAAY,KAAKD,WAAL,CAAiBE,IAA7B;IACA,KAAKC,MAAL,GAAc,IAAd;EACD;;EAEDC,gBAAgB,CAACC,MAAD,EAAS;IACvB;IACA;IACA,IAAIC,KAAJ;;IAEA,KAAK,MAAMC,QAAX,IAAuBF,MAAvB,EAA+B;MAC7BC,KAAK,GAAGD,MAAM,CAACE,QAAD,CAAd;;MAEA,IAAI,KAAKA,QAAL,MAAmBC,SAAvB,EAAkC;QAChC,IAAIF,KAAK,IAAI,OAAOA,KAAK,CAACG,KAAb,KAAuB,UAApC,EAAgD;UAC9C,KAAKF,QAAL,IAAiBD,KAAK,CAACG,KAAN,EAAjB;QACD,CAFD,MAEO;UACL,KAAKF,QAAL,IAAiBD,KAAjB;QACD;MACF;IACF;;IAEDI,MAAM,CAACC,MAAP,CAAc,KAAKC,OAAnB,EAA4BP,MAAM,CAACO,OAAnC;EACD;;EAEDC,MAAM,CAACC,IAAD,EAAO;IACX,MAAMC,MAAM,GAAGD,IAAI,KAAKN,SAAT,IAAsB,OAAOM,IAAP,KAAgB,QAArD;;IAEA,IAAIC,MAAJ,EAAY;MACVD,IAAI,GAAG;QACLE,QAAQ,EAAE,EADL;QAELC,MAAM,EAAE,EAFH;QAGLC,KAAK,EAAE;MAHF,CAAP;IAKD;;IAED,MAAMC,IAAI,GAAGtB,QAAQ,CAACuB,SAAT,CAAmBP,MAAnB,CAA0BQ,IAA1B,CAA+B,IAA/B,EAAqCP,IAArC,CAAb;IACA,MAAMQ,QAAQ,GAAGxB,YAAY,CAAC,IAAD,CAA7B;IACAqB,IAAI,CAACI,UAAL,GAAkB,EAAlB;;IAEA,KAAK,MAAMrB,IAAX,IAAmBoB,QAAnB,EAA6B;MAC3BH,IAAI,CAACI,UAAL,CAAgBrB,IAAhB,IAAwB,KAAKA,IAAL,EAAWW,MAAX,CAAkBC,IAAlB,EAAwBU,IAAhD;IACD,CAjBU,CAiBT;;;IAGF,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;MAC/B,MAAMrB,MAAM,GAAG,EAAf;;MAEA,KAAK,MAAMsB,GAAX,IAAkBD,KAAlB,EAAyB;QACvB,MAAMP,IAAI,GAAGO,KAAK,CAACC,GAAD,CAAlB;QACA,OAAOR,IAAI,CAACS,QAAZ;QACAvB,MAAM,CAACwB,IAAP,CAAYV,IAAZ;MACD;;MAED,OAAOd,MAAP;IACD;;IAED,IAAIU,MAAJ,EAAY;MACV,MAAMC,QAAQ,GAAGS,gBAAgB,CAACX,IAAI,CAACE,QAAN,CAAjC;MACA,MAAMC,MAAM,GAAGQ,gBAAgB,CAACX,IAAI,CAACG,MAAN,CAA/B;MACA,MAAMC,KAAK,GAAGO,gBAAgB,CAACX,IAAI,CAACI,KAAN,CAA9B;MACA,IAAIF,QAAQ,CAACc,MAAT,GAAkB,CAAtB,EAAyBX,IAAI,CAACH,QAAL,GAAgBA,QAAhB;MACzB,IAAIC,MAAM,CAACa,MAAP,GAAgB,CAApB,EAAuBX,IAAI,CAACF,MAAL,GAAcA,MAAd;MACvB,IAAIC,KAAK,CAACY,MAAN,GAAe,CAAnB,EAAsBX,IAAI,CAACD,KAAL,GAAaA,KAAb;IACvB;;IAED,OAAOC,IAAP;EACD;;AArEuC;;AAyE1CpB,YAAY,CAACqB,SAAb,CAAuBW,cAAvB,GAAwC,IAAxC;AAEA,eAAehC,YAAf"},"metadata":{},"sourceType":"module"}