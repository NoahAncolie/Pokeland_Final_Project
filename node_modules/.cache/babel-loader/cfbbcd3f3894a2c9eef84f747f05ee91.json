{"ast":null,"code":"import _slicedToArray from\"/home/odin/Desktop/THP\\u2620/Developpeur/Final_Project/pokeland/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Cookies from\"js-cookie\";import{useSetAtom}from\"jotai\";import{userAtom,JWT}from\"store/atoms\";import\"./style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RegisterForm=function RegisterForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),passwordConfirm=_useState6[0],setPasswordConfirm=_useState6[1];var setUser=useSetAtom(userAtom);var setToken=useSetAtom(JWT);function fetchData(e){e.preventDefault();fetch(\"https://pokeland-api.herokuapp.com/users\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{email:email,password:password}})}).then(function(response){console.log(response);setToken(response.headers.get(\"Authorization\"));Cookies.set('token',response.headers.get(\"Authorization\"),{sameSite:\"none\",secure:true});return response.json();}).then(function(response){console.log(response);setUser(response.user);Cookies.set('user',JSON.stringify(response.user),{sameSite:\"none\",secure:true});}).catch(function(err){return console.error(err);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"user__header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"user__title\",children:\"Rempli le formulaire ci-dessous pour t'inscrire \\uD83D\\uDE42\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",id:\"form\",onSubmit:fetchData,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",name:\"email\",id:\"email\",value:email,className:\"form__input\",onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",id:\"password\",value:password,className:\"form__input\",onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"form__group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password confirmation\",name:\"passwordConfirmation\",id:\"passwordConfirmation\",value:passwordConfirm,className:\"form__input\",onChange:function onChange(e){return setPasswordConfirm(e.target.value);}})}),/*#__PURE__*/_jsx(\"input\",{className:\"btn\",type:\"submit\",value:\"S'inscrire\"})]})]})});};export default RegisterForm;","map":{"version":3,"names":["React","useState","Cookies","useSetAtom","userAtom","JWT","RegisterForm","email","setEmail","password","setPassword","passwordConfirm","setPasswordConfirm","setUser","setToken","fetchData","e","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","response","console","log","get","set","sameSite","secure","json","catch","err","error","target","value"],"sources":["/home/odin/Desktop/THPâ˜ /Developpeur/Final_Project/pokeland/src/pages/RegisterForm/index.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Cookies from \"js-cookie\";\nimport { useSetAtom } from \"jotai\";\nimport { userAtom, JWT } from \"store/atoms\";\nimport \"./style.css\";\n\nconst RegisterForm = () => {\n  const [ email, setEmail ] = useState(\"\");\n  const [ password, setPassword ] = useState(\"\");\n  const [ passwordConfirm, setPasswordConfirm ] = useState(\"\");\n\n  const setUser = useSetAtom(userAtom);\n  const setToken = useSetAtom(JWT);\n\n\n  function fetchData(e) {\n    e.preventDefault();\n    fetch(\"https://pokeland-api.herokuapp.com/users\", {\n        method: \"post\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            user: {\n                email: email,\n                password: password,\n            },\n        }),\n    }).then((response) => {\n      console.log(response);\n      setToken(response.headers.get(\"Authorization\"));\n      Cookies.set('token', response.headers.get(\"Authorization\"),{\n        sameSite: \"none\",\n        secure: true\n      })  \n      return (response.json())\n    }).then((response) => {\n        console.log(response);\n      setUser(response.user);\n      Cookies.set('user', JSON.stringify(response.user), {\n        sameSite: \"none\",\n        secure: true\n      }) \n    })\n    .catch((err) => console.error(err));\n};\n\n\n\n  return (\n    <>\n      <div className=\"user\">\n        <header className=\"user__header\">\n          <h2 className=\"user__title\">\n            Rempli le formulaire ci-dessous pour t'inscrire ðŸ™‚\n          </h2>\n        </header>\n\n        <form className=\"form\" id=\"form\" onSubmit={fetchData}>\n          <div className=\"form__group\">\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              name=\"email\"\n              id=\"email\"\n              value={email}\n              className=\"form__input\"\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </div>\n\n          <div className=\"form__group\">\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              name=\"password\"\n              id=\"password\"\n              value={password}\n              className=\"form__input\"\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </div>\n\n          <div className=\"form__group\">\n            <input\n              type=\"password\"\n              placeholder=\"Password confirmation\"\n              name=\"passwordConfirmation\"\n              id=\"passwordConfirmation\"\n              value={passwordConfirm}\n              className=\"form__input\"\n              onChange={(e) => setPasswordConfirm(e.target.value)}\n            />\n          </div>\n\n          <input className=\"btn\" type=\"submit\" value=\"S'inscrire\" />\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default RegisterForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}